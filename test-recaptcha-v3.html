<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test reCAPTCHA v3</title>
    <!-- reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LcvpngrAAAAANqmo28MvQayGcfjEatSBT7C_ziL"></script>
</head>
<body>
    <h1>Test reCAPTCHA v3</h1>
    <p>Este es un test para verificar que reCAPTCHA v3 funciona correctamente.</p>
    
    <button onclick="testRecaptcha()">Probar reCAPTCHA v3</button>
    <div id="result"></div>

    <script>
        function testRecaptcha() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Ejecutando reCAPTCHA v3...';
            
            if (typeof grecaptcha !== 'undefined' && grecaptcha.ready) {
                grecaptcha.ready(function() {
                    grecaptcha.execute('6LcvpngrAAAAANqmo28MvQayGcfjEatSBT7C_ziL', {action: 'submit'})
                        .then(function(token) {
                            resultDiv.innerHTML = `
                                <h3>‚úÖ reCAPTCHA v3 funcionando</h3>
                                <p><strong>Token recibido:</strong></p>
                                <textarea style="width: 100%; height: 100px;">${token}</textarea>
                                <p><strong>Longitud del token:</strong> ${token.length}</p>
                                <p><strong>Preview:</strong> ${token.substring(0, 20)}...</p>
                            `;
                        })
                        .catch(function(error) {
                            resultDiv.innerHTML = `
                                <h3>‚ùå Error en reCAPTCHA v3</h3>
                                <p><strong>Error:</strong> ${error}</p>
                                <p>Posibles causas:</p>
                                <ul>
                                    <li>Site key incorrecta</li>
                                    <li>Dominio no autorizado</li>
                                    <li>Problema de red</li>
                                </ul>
                            `;
                        });
                });
            } else {
                resultDiv.innerHTML = `
                    <h3>‚ùå reCAPTCHA v3 no disponible</h3>
                    <p>grecaptcha no est√° cargado o no tiene la funci√≥n ready.</p>
                    <p>Verifica que el script se haya cargado correctamente.</p>
                `;
            }
        }
        
        // Test autom√°tico al cargar
        window.onload = function() {
            console.log('üîç Test reCAPTCHA v3 cargado');
            if (typeof grecaptcha !== 'undefined') {
                console.log('‚úÖ grecaptcha disponible');
                if (grecaptcha.ready) {
                    console.log('‚úÖ grecaptcha.ready disponible');
                } else {
                    console.log('‚ùå grecaptcha.ready no disponible');
                }
            } else {
                console.log('‚ùå grecaptcha no disponible');
            }
        };
    </script>
</body>
</html> 